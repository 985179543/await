<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>为await 唱赞歌</title>
</head>
<body>
  <script>
  'use strict'
  // 函数 异步  async就是异步
  // async 用于定义一个异步函数，该函数返回一个promise

  let count = ()=>{
    return new Promise((resolve,reject)=>{
      setTimeout(()=>{
        console.timeEnd('begin')
        resolve(['a','b','c'])
      },1500)
    })
  }

  let list = ()=>{
    return new Promise((resolve,reject)=>{
      setTimeout(()=>{
        console.timeEnd('begin')
        resolve([1,2,3])
      },500)
    })
  }
  let list2 = ()=>{
    return new Promise((resolve,reject)=>{
      setTimeout(()=>{
        resolve([4,5,6])
      },500)
    })
  }
  let list3 = ()=>{
    return new Promise((resolve,reject)=>{
      setTimeout(()=>{
        resolve([7,8,9])
      },2500)
    })
  }
  // 异步函数 执行流程
  // 异步的变为同步的
  let getList = async ()=>{
    // 异步中的并发 Promise.all
    let result = await Promise.all([count(),list()])

    // let c =await count();
    // console.log(c);
    // let l =await list();
    // console.log(l);
    // ... promise  列出来
  }
  let getList2 = async ()=>{
    let c =await count();
    console.log(c);
    let l =await list2();
    console.log(l);
    // ... promise  列出来
  }
  let getList3 = async ()=>{
    let c =await count();
    console.log(c);
    let l =await list3();
    console.log(l);
    // ... promise  列出来
  }
  // let getListAll = async ()=>{
  //   await getList();
  //   await getList2();
  // }
  // console.time('begin');
  // getListAll()

  getList()
 .then(()=>{
   return getList2();
 }).then(()=>{
   return getList3();
 })


  // timer()
  // .then(result =>{
  //   console.log(result);
  // })
  // .catch(err=>{
  //   console.log(err.message);
  // })
  </script>
</body>
</html>
